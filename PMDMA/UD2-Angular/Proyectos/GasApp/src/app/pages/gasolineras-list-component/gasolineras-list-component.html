<body class="bg-light d-flex flex-column justify-content-between" style="height: 100vh;">

    <app-navbar-component></app-navbar-component>

    @if (datosGasolineras.length === 0) {
        <div class="container my-4">
            <div class="alert alert-warning text-center" role="alert">
                No se han encontrado gasolineras para este municipio.
            </div>
        </div>
    } @else {
    <!-- Contenido principal -->
    <main class="container my-4">
        <!-- Cabecera con información del municipio -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex align-items-center mb-3">
                    <div class="bg-primary bg-opacity-10 text-primary rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 60px; height: 60px;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-fuel-pump" viewBox="0 0 16 16">
                            <path d="M3 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5Z"/>
                            <path d="M1 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1 2 2v.5a.5.5 0 0 0 1 0V8h-.5a.5.5 0 0 1-.5-.5V4.375a.5.5 0 0 1 .5-.5h1.495c-.011-.476-.053-.894-.201-1.222a.97.97 0 0 0-.394-.458c-.184-.11-.464-.195-.9-.195a.5.5 0 0 1 0-1c.564 0 1.034.11 1.412.336.383.228.634.551.794.907.295.655.294 1.465.294 2.081V7.5a.5.5 0 0 1-.5.5H15v4.5a1.5 1.5 0 0 1-3 0V12a1 1 0 0 0-1-1v4a.5.5 0 0 1-.5.5h-3A.5.5 0 0 1 7 15V2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1 2 2v.5a.5.5 0 0 0 1 0V8h-.5a.5.5 0 0 1-.5-.5V4.375a.5.5 0 0 1 .5-.5h1.495c-.011-.476-.053-.894-.201-1.222a.97.97 0 0 0-.394-.458c-.184-.11-.464-.195-.9-.195a.5.5 0 0 1 0-1c.564 0 1.034.11 1.412.336.383.228.634.551.794.907.295.655.294 1.465.294 2.081V7.5a.5.5 0 0 1-.5.5H15v4.5a1.5 1.5 0 0 1-3 0V12a1 1 0 0 0-1-1v4a.5.5 0 0 1-.5.5h-3A.5.5 0 0 1 7 15V2Z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="display-6 text-primary mb-1">Gasolineras en <strong>Abanto</strong></h1>
                        <p class="lead mb-0">Consulta los precios actualizados de combustible en todas las gasolineras del municipio.</p>
                        <div class="d-flex flex-wrap align-items-center gap-2 mt-2">
                            <span class="badge bg-primary">ZARAGOZA</span>
                            <span class="badge bg-secondary">Aragón</span>
                            <span class="badge bg-light text-dark border">Código postal: ...</span>
                            <span class="badge bg-light text-dark border">3 gasolineras disponibles</span>
                        </div>
                    </div>
                </div>
                
                <!-- Filtros y estadísticas -->
                <div class="row g-3">
                    <div class="col-lg-12">
                        <div class="card shadow-sm border">
                            <div class="card-body p-3">
                                <form class="row g-2">
                                    <div class="col-md-6">
                                        <label for="filterRotulo" class="form-label small fw-bold">Nombre de gasolinera</label>
                                        <input type="text" class="form-control form-control-sm" id="filterRotulo" placeholder="Ej: Repsol, Cepsa...">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="filterCombustible" class="form-label small fw-bold">Tipo de combustible</label>
                                        <select class="form-select form-select-sm" id="filterCombustible">
                                            <option selected>Todos los combustibles</option>
                                            <option value="gasoleoA">Gasóleo A</option>
                                            <option value="gasoleoPremium">Gasóleo Premium</option>
                                            <option value="gasolina95E5">Gasolina 95 E5</option>
                                            <option value="gasolina98E5">Gasolina 98 E5</option>
                                        </select>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-lg-4">
                        <div class="card bg-primary text-white shadow-sm">
                            <div class="card-body p-3 text-center">
                                <h6 class="card-title mb-1">Precio medio actual</h6>
                                <div class="display-6 fw-bold">1.429€</div>
                                <small class="opacity-75">Gasóleo A - Media del municipio</small>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>

        <!-- Listado de gasolineras -->
        <div class="row">
            <div class="col-12">

                @for (gasolinera of datosGasolineras; track gasolinera.id) {
                    <!-- Gasolinera 1 -->
                    <div class="card mb-4 shadow-sm border">
                        <div class="card-header bg-white d-flex justify-content-between align-items-center">
                            <div>
                                <h4 class="mb-0 text-primary">Gasolinera {{ gasolinera.rotulo }}</h4>
                                <small class="text-muted">ID: {{ gasolinera.id }}</small>
                            </div>
                            <div class="d-flex gap-2">
                                <span class="badge bg-warning text-dark">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-clock me-1" viewBox="0 0 16 16">
                                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                    </svg>
                                    {{gasolinera.horario}}
                                </span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-lg-6">
                                    <h6 class="text-muted mb-3">Información de la gasolinera</h6>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-start mb-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt text-primary me-2 mt-1" viewBox="0 0 16 16">
                                                <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                                            </svg>
                                            <div>
                                                <strong>Dirección:</strong>
                                                <p class="mb-1">{{gasolinera.direccion}}</p>
                                                <small class="text-muted">Localidad: {{gasolinera.localidad}} | CP: {{gasolinera.cp}}</small>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-start mb-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock text-primary me-2 mt-1" viewBox="0 0 16 16">
                                                <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                                            </svg>
                                            <div>
                                                <strong>Horario:</strong>
                                                <p class="mb-0">{{gasolinera.horario}}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <div class="d-flex align-items-start">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo text-primary me-2 mt-1" viewBox="0 0 16 16">
                                                <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999zm2.493 8.574a.5.5 0 0 1-.411.575c-.712.118-1.28.295-1.655.493a1.319 1.319 0 0 0-.37.265.301.301 0 0 0-.057.09V14l.002.008a.147.147 0 0 0 .016.033.617.617 0 0 0 .145.15c.165.13.435.27.849.384.825.226 1.867.338 2.883.338 1.016 0 2.058-.112 2.883-.338.414-.114.684-.254.85-.384a.619.619 0 0 0 .144-.15.148.148 0 0 0 .015-.033L12 14v-.004a.301.301 0 0 0-.057-.09 1.318 1.318 0 0 0-.37-.264c-.376-.198-.943-.375-1.655-.493a.5.5 0 1 1 .164-.986c.77.127 1.452.328 1.957.594C12.5 13 13 13.4 13 14c0 .426-.26.752-.544.977-.29.228-.68.413-1.116.558-.878.293-2.059.465-3.34.465-1.281 0-2.462-.172-3.34-.465-.436-.145-.826-.33-1.116-.558C3.26 14.752 3 14.426 3 14c0-.599.5-1 .961-1.243.505-.266 1.187-.467 1.957-.594a.5.5 0 0 1 .575.411z"/>
                                            </svg>
                                            <div>
                                                <strong>Coordenadas:</strong>
                                                <p class="mb-0">Lat: {{gasolinera.coordenadas.latitud}} | Long: {{gasolinera.coordenadas.longitud}}</p>
                                                <a target="_blank" href="https://www.google.com/maps/search/?api=1&query={{gasolinera.coordenadas.latitud}},{{gasolinera.coordenadas.longitud}}">Ver en google maps</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Precios de combustible -->
                                <div class="col-lg-6">
                                    <h6 class="text-muted mb-3">Precios de combustible</h6>
                                    
                                    <div class="row g-3">
                                        <!-- Gasóleo A -->
                                        <div class="col-md-6">
                                            <div class="card h-100 border">
                                                <div class="card-body text-center p-3">
                                                    <div class="text-muted small mb-2">GASÓLEO A</div>
                                                    @if (!gasolinera.precios.gasoleoA) {
                                                        <span class="badge bg-danger">No disponible</span>
                                                    } @else {
                                                    <div class="display-6 fw-bold text-primary mb-1">{{gasolinera.precios.gasoleoA}}€</div>
                                                    <div class="small text-muted">Precio por litro</div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Gasolina 95 E5 -->
                                        <div class="col-md-6">
                                            <div class="card h-100 border">
                                                <div class="card-body text-center p-3">   
                                                    <div class="text-muted small mb-2">GASOLINA 95 E5</div>
                                                    @if (!gasolinera.precios.gasolina95E5) {
                                                        <span class="badge bg-danger">No disponible</span>
                                                    } @else {
                                                        <div class="display-6 fw-bold text-primary mb-1">{{gasolinera.precios.gasolina95E5}}€</div>
                                                        <div class="small text-muted">Precio por litro</div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Gasóleo Premium -->
                                        <div class="col-md-6">
                                            <div class="card h-100 border">
                                                <div class="card-body text-center p-3">
                                                    <div class="text-muted small mb-2">GASÓLEO PREMIUM</div>
                                                    @if (!gasolinera.precios.gasoleoPremium) {
                                                        <span class="badge bg-danger">No disponible</span>
                                                    } @else {
                                                    <div class="display-6 fw-bold text-primary mb-1">{{gasolinera.precios.gasoleoPremium}}€</div>
                                                    <div class="small text-muted">Precio por litro</div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Gasolina 98 E5 -->
                                        <div class="col-md-6">
                                            <div class="card h-100 border">
                                                <div class="card-body text-center p-3">
                                                    <div class="text-muted small mb-2">GASOLINA 98 E5</div>
                                                    @if (!gasolinera.precios.gasolina98E5) {
                                                        <span class="badge bg-danger">No disponible</span>
                                                    } @else {
                                                        <div class="display-6 fw-bold text-primary mb-1">{{gasolinera.precios.gasolina98E5}}€</div>
                                                        <div class="small text-muted">Precio por litro</div>
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }



                <!-- Información adicional -->
                <div class="row mt-4">
                    <div class="col-md-6 mb-3">
                        <div class="card h-100 border">
                            <div class="card-body">
                                <h6 class="text-primary mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle me-2" viewBox="0 0 16 16">
                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                        <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
                                    </svg>
                                    Leyenda de precios
                                </h6>
                                <div class="d-flex flex-wrap gap-2 mb-2">
                                    <span class="badge bg-success">Bajo precio</span>
                                    <small>Entre los más baratos del municipio</small>
                                </div>
                                <div class="d-flex flex-wrap gap-2 mb-2">
                                    <span class="badge bg-warning text-dark">Precio medio</span>
                                    <small>En la media de precios del municipio</small>
                                </div>
                                <div class="d-flex flex-wrap gap-2 mb-2">
                                    <span class="badge bg-info">Disponible</span>
                                    <small>Combustible disponible</small>
                                </div>
                                <div class="d-flex flex-wrap gap-2">
                                    <span class="badge bg-secondary">Sin datos</span>
                                    <small>Combustible no disponible o sin datos</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <div class="card h-100 border">
                            <div class="card-body">
                                <h6 class="text-primary mb-3">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-check me-2" viewBox="0 0 16 16">
                                        <path d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                                    </svg>
                                    Actualización de precios
                                </h6>
                                <p class="mb-2">Los precios se actualizan automaticamente cada 30 minutos.</p>
                                <div class="d-flex align-items-center">
                                    <small class="text-muted">{{datosBase.Fecha}}</small>
                                </div>
                                <hr>
                                <small class="text-muted">Los datos provienen de fuentes oficiales del Ministerio para la Transición Ecológica y el Reto Demográfico.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    }
    <!-- Pie de página -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>Gasolineras España</h5>
                    <p class="mb-2">Visualización de precios de gasolina en las diferentes gasolineras de España.</p>
                    <div class="mt-3">
                        <a [routerLink]="['/provincias/', idProvincia]" class="text-white-50 text-decoration-none me-3">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left me-1" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                            </svg>
                            Volver a municipios
                        </a>
                        <a href="index.html" class="text-white-50 text-decoration-none">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-door me-1" viewBox="0 0 16 16">
                                <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"/>
                            </svg>
                            Ver todas las provincias
                        </a>
                    </div>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-1">© 2023 Gasolineras España</p>
                    <p class="text-muted small">Aplicación web para consulta de precios de combustible</p>
                </div>
            </div>
        </div>
    </footer>
</body>